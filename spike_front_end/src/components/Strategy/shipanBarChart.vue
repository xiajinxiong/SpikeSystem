<template>
  <div style="position: relative; width: 100%; background: #344b58 !important">
    <el-menu
      style="margin-bottom: -1px; padding-left: 5%"
      :default-active="activeIndex2"
      class="el-menu-demo"
      mode="horizontal"
      @select="handleSelect"
      background-color="#344b58"
      text-color="#fff"
      active-text-color="#409EFF"
    >
      <el-menu-item index="1">盈利率</el-menu-item>
      <!--<el-submenu index="2">
    <template slot="title">我的工作台</template>
    <el-menu-item index="2-1">选项1</el-menu-item>
    <el-menu-item index="2-2">选项2</el-menu-item>
    <el-menu-item index="2-3">选项3</el-menu-item>
    <el-submenu index="2-4">
      <template slot="title">选项4</template>
      <el-menu-item index="2-4-1">选项1</el-menu-item>
      <el-menu-item index="2-4-2">选项2</el-menu-item>
      <el-menu-item index="2-4-3">选项3</el-menu-item>
    </el-submenu>
  </el-submenu>
  <el-menu-item index="3" disabled>消息中心</el-menu-item>
  <el-menu-item index="4"><a href="https://www.ele.me" target="_blank">订单管理</a></el-menu-item>-->
      <el-menu-item index="2">换手率</el-menu-item>
      <el-menu-item index="3">创业板比例</el-menu-item>
    </el-menu>
    <div
      :zIndex="-1"
      :id="id3"
      :class="className"
      style="position: relative; width: 100%; height: calc(100vh - 184px)"
    ></div>
  </div>
</template>

<script>
import echarts from "echarts";
import axios from 'axios';

export default {
  name: "shipanBarChart",
  props: {
    className: {
      type: String,
      default: "chart",
    },
    id3: {
      type: String,
      default: "chart3",
    },
    width: {
      type: String,
      default: "200px",
    },
    height: {
      type: String,
      default: "200px",
    },
    marginTop: {
      type: String,
      default: "200px",
    },
    cookie: {
      type: String,
      default: '1',
    }
  },
  data() {
    return {
      chart: null,
      xRe: [],
      map: new Map(),
      starttime: null,
      endtime: null,
      turnoverRate: [],
      GEMRate: [],//[0.399831893336137, 0.422783099683705, 0.410404350299599, 0.396011898268758, 0.364107107932572, 0.351640011918218, 0.349131668153778, 0.352298008635347, 0.335255843980921, 0.356948985727003, 0.32510283215126, 0.322093725816461, 0.362942624255373, 0.312087792689014, 0.311780415499987, 0.305839979506825, 0.295534428844665, 0.303677557028449, 0.283491763066985, 0.253864886816421, 0.280795522597098, 0.269571225171991, 0.245955159097077, 0.27821722076265, 0.346728214489238, 0.293470780966896, 0.302825560835963, 0.3815063511854, 0.374040465480181, 0.410209317585075, 0.359352504225163, 0.350354128934692, 0.330872606978973, 0.361236691456309, 0.388484998477946, 0.500111612681595, 0.399392960447633, 0.397819496085664, 0.407037747158244, 0.426545853186694, 0.389377427958732, 0.321288927793198, 0.310963266655503, 0.338525117104776, 0.334949670772332, 0.374820017720069, 0.402339631534975, 0.413089179829404, 0.410726464668403, 0.409964921601605, 0.440219936567933, 0.396767031877546, 0.361305615075431, 0.381288217402831, 0.4077018724245, 0.366353509360165, 0.34967826923274, 0.350746319872524, 0.39090362354324, 0.408793802447714, 0.389222255178496, 0.404622260492848, 0.370013640583987, 0.369224299821881, 0.40700079875004, 0.398854619381554, 0.429369410237091, 0.373857516043743, 0.388047965447718, 0.414693693735762, 0.413830533225894, 0.375662003215279, 0.32333332722739, 0.330547965666277, 0.309268969913385, 0.346851999364828, 0.394693979097895, 0.39708223978007, 0.417772210404399, 0.430605661185848, 0.436282776381435, 0.40168399614776, 0.46222126009981, 0.412565189903074, 0.430789397810532, 0.392363028715616, 0.399954798936641, 0.425540672247442, 0.40883026500896, 0.406359895044327, 0.404044105820823, 0.383242749921308, 0.408031028021263, 0.455533850090137, 0.469871318585437, 0.450009480705652, 0.449151021871908, 0.446430309541347, 0.42586186374985, 0.41300097537079, 0.430428328152253, 0.442308055294543, 0.431769339803766, 0.439717422068411, 0.398581418391945, 0.405407253125166, 0.389393807217687, 0.360434291049812, 0.389861708303863, 0.42011550522369, 0.401179854161508, 0.416430144477625, 0.405465751255658, 0.431667462448839, 0.436121938544213, 0.400988655619439, 0.410922656964366, 0.393377884781365, 0.413915304247171, 0.442439614289233, 0.409585520520995, 0.426306263700844, 0.408704257890272, 0.388911886200835, 0.356517929964628, 0.392850246298148, 0.438010432406384, 0.504554563529599, 0.505277983257135, 0.488129893054568, 0.458934333982319, 0.491773947110319, 0.438124562842337, 0.434398031983931, 0.379028730355084, 0.402867718881554, 0.370400481371902, 0.394333377024748, 0.408648571344097, 0.408681903224436, 0.39632866135867, 0.384093361629069, 0.423263267496989, 0.455727892679186, 0.408465481719419, 0.456559364122957, 0.480013217496879, 0.443941333659342, 0.390255439639237, 0.466198488295073, 0.44455604130178, 0.484091879951217, 0.457312104559268, 0.444323688771598, 0.461745335718875, 0.458124981724258, 0.50871764506482, 0.511103649515019, 0.574033853409734, 0.537745403999056, 0.517727289983469, 0.470820994726606, 0.387945423098208, 0.371568978390552, 0.422051249941349, 0.404589132472999, 0.490471793711534, 0.409527944416537, 0.55827528689585, 0.663653656849027, 0.722340995060111, 0.736035298608346, 0.716288015647957, 0.623643159620508, 0.523426891733273, 0.50927793894498, 0.506604076818739, 0.484924205488952, 0.416786239968673, 0.501069060900475, 0.522826171014725, 0.500848098205787, 0.474267918202943, 0.451390607628306, 0.425490564065598, 0.396508408353464, 0.356924746838859, 0.356973364215741, 0.356027053896114, 0.330735039773017, 0.349699499974027, 0.353142689879334, 0.418645172947919, 0.415649638238956],
      ProfitRate: [],//[0.00458613823155152, 0.00978693092656413, 0.0177354343396534, -0.012542200685824501, 0.017726604430427798, -0.0007725360914332401, 0.0180478871501606, -0.00250354313061707, 0.00230032089703869, -2.4101384829222598e-05, -0.00168444603847084, 0.012319449611952799, -0.0113390387387811, 0.0078676345812223, -0.0379647417564094, -0.08184996387518069, 0.01079437605275, 0.029780222511882202, 0.0276839414709471, 0.012889053301327301, 0.019302239674242203, 0.00191769373819506, 0.0195481773958959, -0.0068390139273402095, 0.00119589657595198, 0.0386461583110833, 0.018807788088450298, -0.008292990352858241, 0.0211114535765429, 0.0139905901838537, 0.0206468265623867, 0.0009661848173139199, -0.0303770715281776, 0.0154736255843715, -0.0557962770718968, 0.040493128602658, 0.0141764849443664, 0.011464121196724998, 0.0186969733690594, 0.000840751953026686, -0.0330418896277436, 0.0258761996367405, -0.0110779019391493, -0.0219427253613989, -0.00662831298730926, -0.049325474560572596, 0.0069907491287335395, -0.007011167699849889, 0.00744426344809912, 0.0183879909078326, -0.0333011604779098, 0.02327677046318, 0.0208316608094938, -0.00503565201789724, -0.0014839307839041899, -0.0241166283028776, 0.00153589653996655, -0.00302096941462315, 0.0268764803918506, -0.00696619249243002, 0.0300864497112696, 0.00376347646041442, 0.0117223856115047, -0.0271793433100133, -0.008531580380332861, 0.024188242296161698, -0.000354565980865251, 0.00861056380574299, 0.00422005289189076, 0.0184776204319648, -0.00679351531818295, 0.00969669701107612, -0.0027902867165704396, -0.0133122498142956, -0.0045876605205399405, -0.0117254729877711, 0.00258166021106621, 0.027279618094370003, 0.0248874202909548, 0.00200785267669201, 0.015720560591723002, -0.0025185890654022603, 0.00397043078248394, 0.00717096698558151, -0.007155476056493249, 0.00634424595254179, -0.00194105296760327, 0.016826109039898, -0.00859008829386843, -0.009258376894592189, -0.0164168183228428, 0.0006638629537292221, 0.0289341837594432, -0.0075922556010981105, -0.0033853749115042597, 0.0169620452329038, 0.029711903702434702, -0.0024246914342918, 0.00576360997970737, 0.0073368925214596405, 0.0014955276357144802, -0.00391599848976021, 0.010773710649978101, 0.00467750586542848, 0.000530756576258673, 0.00176919882947457, -0.00331065844087408, 0.024106102690876, 0.0023662367174017702, -0.000804628070099955, 0.0168493682727013, 0.00359271227437019, 0.0122883168857082, -0.000788623833852919, 0.0012065281642448201, 0.0208197571448869, -0.00267884540648289, 0.00403854773518853, 0.0120075224191985, 0.0216474776105522, 0.0242316784659979, 0.0179969763324457, 0.032115357471636796, 0.012078431753074902, 0.0337669834617449, -0.00543914074825902, -0.0192211471401705, -0.0577344395380359, 0.00931786273889301, 0.0290365565904818, 0.0135606064251443, 0.0106386611880709, -0.000160791992528386, -0.0488194336012858, 0.00419946554530482, 0.013250526928529899, 0.027798262612630097, -0.00110540629490186, 0.0139330505997268, 0.024094075459439, -0.00226642313061132, 0.021429318009807102, -0.00115190911392016, -0.000342752838553895, 0.005446392271100779, -0.0226627208023754, -0.020964968955257998, 0.0034738776443648, 0.010387613714527798, 0.0190673795154366, 0.00959479462898161, -0.019686863310178, -0.0121882911866465, 0.016861445117349202, 0.012998376208273701, 0.000859248398173973, -0.023347796007760203, 0.0202479868020942, 0.013378311415454001, 0.00342186600243433, 0.00955375828247829, 0.00180543974950265, -0.00694970884987145, -0.0008420258960245559, -0.023449783026224802, 0.00432112143932018, -0.0402861423205965, -0.0368036810942682, 0.027956072355304503, 0.0386861819830755, 0.0032589587724334303, -0.012461566519890901, 0.0064955493795813, 0.00899245116961622, -0.00496039076912147, -0.0171952109397508, 0.011603605006141, -0.028207520583985998, -0.00646991805320019, -0.0186497005942644, 0.014147271411121001, -0.00199316381007253, 0.0310196771313056, 0.029821491110749897, 0.0075680835187086305, -0.00471341379996382, -0.00176196907616621, 0.00224562536219341, -0.010332426569297799, 0.010076666615545899, -0.014816229881818199, -0.00474839294226148, -0.019668973363973302],
      bmProfitRate: [],//[0.00270207388461441, 0.010075591047097501, 0.011957863862414299, -0.013826385297243999, 0.013596804127942601, -0.00314958888269901, 0.0144883208233002, -0.0031109280133027103, -0.00222018473236052, -0.00042658022657649, -0.00318801731131579, 0.0140635141420704, -0.0113814033839137, 0.009335851269543621, -0.035471447055827804, -0.08680968297265179, 0.017425152381911998, 0.0255155120081374, 0.0310170729411554, 0.00835616142233619, 0.011525732063166101, -0.00504007202536694, 0.0184040674788515, -0.00862724633856715, 0.00147070620094603, 0.0320310692005472, 0.011864930241590702, -0.0101666647175948, 0.0184624757725968, 0.0135488509873647, 0.014079174975533399, 0.00549920453897323, -0.026167561410448598, 0.00179942416964018, -0.0525638361370491, 0.0376295539750893, 0.009476701983532681, 0.00113619497362838, 0.0148007581967129, -0.00642284604391652, -0.0412993188141516, 0.027017653336202797, -0.0150799157013888, -0.0171118647143768, -0.006677097902944021, -0.0471095748248654, 0.00229758415690173, -0.0177646201784365, 0.00749137860243243, 0.0119153747699974, -0.042222559816621506, 0.0194304977915683, 0.023819059690417102, -0.00983523726470614, -0.005569375218963169, -0.021382965116305098, 0.0027782874206543403, -0.00441037499225927, 0.0254986298963222, -0.00780280252849608, 0.0313359053258118, 0.000896721955438773, 0.00961063346133595, -0.0214094929838289, -0.00755196754726539, 0.0231018071217817, -0.0037520943661197795, 0.00915226623880039, 0.000279106296372733, 0.011907782160859798, -0.00704321987402801, 0.008185568367676371, -0.005537302505912109, -0.0157234594320821, -0.00148336582695752, -0.00719346366145079, -0.00019786351778527898, 0.0243069599064942, 0.018203017841615, -0.00102067099065006, 0.011374847980129199, -0.0020888042759800197, 0.00296059526304759, 0.0043204273080059705, -0.00888199264191891, 0.00379555200946546, -0.005285430456169579, 0.0126038229606227, -0.010485724815870501, -0.011572193785951099, -0.0180509675831472, -0.00218143867299347, 0.01948781737273, -0.00935634886351133, -0.00155176482752795, 0.00842601993185421, 0.0301756254596106, -0.000545149636949738, 0.0010542996948967901, 0.000796976120775561, 0.00155459623596443, -0.0018117696401549498, 0.00629092198674197, 0.000867018322153967, -0.00465515135350281, 0.000426759082707173, -0.00015087220714526898, 0.0187200632628428, 0.00704398276986495, -0.00017702283371368, 0.0091980281120807, -0.000539350279642137, 0.00351244908629322, -0.00262798046221613, -0.00460374656856644, 0.0176971281147711, 0.0029791711243425402, 0.0158778793372025, 0.0127576461110757, 0.041038551386985304, 0.0127260863507797, 0.024355302162015802, 0.0242264795085472, -0.00258568252642799, 0.0334130599863496, -0.0133039013235348, -0.0248083684906871, -0.0480265192175788, 0.00389131446099666, 0.028723883738955198, 0.00559098153660309, 0.00874029697056389, -9.113854655584669e-05, -0.0507701569250031, 0.00234755564508138, 0.00967314850246659, 0.026826497130658, -0.00288429062486717, 0.0104790402608581, 0.024338440945423902, -0.0062466759997708, 0.0112180331086738, -0.000375115782263458, -0.0120259635109904, 0.00544386923124485, -0.0185045249163471, -0.0109754547870766, 0.0037155812100298003, 0.0108210460651783, 0.0182656214669228, 0.00664997980294224, -0.0181347303271175, -0.0108739904780394, 0.00760707241743552, 0.00677614039033814, -0.00544432533782091, -0.01904070497622, 0.00810811895887853, 0.0170880024281668, -0.00340394358592544, 0.00630235009780655, 0.00105775164530808, -0.008233111023873469, -0.00655563663425185, -0.021116898223518497, 0.00714414882579439, -0.026953556866119, -0.017900567178027002, 0.012252018007595799, 0.00622233924860494, 0.00576868254213347, -0.00532954553548726, 0.0020750614274589498, 0.0160905086438701, -0.00363311104410224, -0.013545357654678, 0.00524968185080765, -0.023059017734405097, -0.0012408243493468001, -0.00936702366935949, 0.008141417810395351, -0.005822384731189681, 0.0267204650396298, 0.028814994141763202, 0.00156282295415999, -0.00656720831232549, -0.00742635530350511, -0.00485424178745109, -0.0109448402971298, 0.010190032391096799, -0.0113807903233459, -0.00517619437202077, -0.0164443304266716],
      alphaProfitRate: [],//[0.00187898718473578, -0.00028578071096074803, 0.00570929945164633, 0.00130218918076275, 0.00407440146384275, 0.00238456318496327, 0.0035087307106420602, 0.00060928030986962, 0.00453056431912935, 0.000402650604533372, 0.00150838001444309, -0.00171987701538911, 4.28523651867518e-05, -0.00145463641906174, -0.00258498796429707, 0.00543119983314777, -0.0065172129012524005, 0.00415860165332238, -0.0032328576875065903, 0.0044953281909809704, 0.00768789894767652, 0.00699301104289241, 0.0011234341589745301, 0.00180379418803112, -0.000274406054308174, 0.00640977709678858, 0.00686144725383642, 0.00189291903793287, 0.00260095768568824, 0.000435834144608682, 0.00647646825703907, -0.00450822805348516, -0.00432262261033911, 0.013649639922747502, -0.00341177702323325, 0.0027597273194452897, 0.00465566263352013, 0.0103162050028254, 0.00383938929969885, 0.00731055255047086, 0.00861314625978382, -0.00111142558821098, 0.00406328779972997, -0.0049149648607959, 4.91128469217728e-05, -0.0023254507309168303, 0.00468240674827069, 0.0109479384468316, -4.67648213513527e-05, 0.0063964006271835004, 0.00931468936771318, 0.00377296213910028, -0.00291789731070891, 0.00484725919103624, 0.0041083252398410606, -0.0027933942381223, -0.00123894872503039, 0.00139556052286616, 0.00134359077170854, 0.000843189275476774, -0.00121149240328977, 0.00286418612639183, 0.00209165006803547, -0.00589608246229301, -0.000987067132015573, 0.00106190328940614, 0.00341032424363585, -0.000536789591799036, 0.00393984695942495, 0.00649252667775269, 0.00025147575487949303, 0.00149885962546215, 0.0027623115439760998, 0.0024497278136848, -0.0031089063390049598, -0.00456484638289578, 0.002780073804034, 0.00290211655707884, 0.00656490143145461, 0.00303161795184015, 0.00429683674680348, -0.000430684404848503, 0.00100685463038697, 0.00283827710765205, 0.00174198891817934, 0.00253905682085787, 0.0033621478874086303, 0.00416973152138644, 0.00191572427962106, 0.00234090631284589, 0.00166418949085601, 0.0028515220471931903, 0.00926579624174129, 0.0017807546239148, -0.0018364598377596001, 0.00846470155701295, -0.00045013854503594996, -0.00188056698775274, 0.0047043504895247805, 0.00653470839413783, -5.8976914960040505e-05, -0.0021080481472384198, 0.00445476408987733, 0.00380718664269941, 0.00521016202255287, 0.0013418670927978198, -0.00316026302958727, 0.00528706523240774, -0.00464502656537091, -0.000627716356514596, 0.007581604350668461, 0.00413429238576679, 0.00874515090211925, 0.00184420315823131, 0.0058371474804948, 0.0030683284288131104, -0.00564121039969645, -0.0116542862511568, -0.000740674429620558, -0.0186266625290661, 0.011361010909353599, -0.00620714884391194, 0.00770227886206842, 0.0147021293183827, 0.000342480165094861, 0.00797080335660127, 0.00572935735909597, -0.010197679364427401, 0.005405513724172421, 0.000303942444098926, 0.00792531460093571, 0.0018819157152818499, -6.96597946650002e-05, 0.00205505899119007, 0.0018475726206879102, 0.00354310544097292, 0.0009463774889795221, 0.00178402999094263, 0.0034181909779909, -0.00023855932396643598, 0.00400527250881288, 0.010098005145084299, -0.0007770848284400781, 0.011825422775233501, 2.5093791244934498e-06, -0.0042365920084081994, -0.0101003703260275, -0.000240808820934468, -0.000428792368676878, 0.000787376134096185, 0.00292536123292431, -0.00158080037149855, -0.00132874951821593, 0.00918450550144567, 0.0061803568522425, 0.00633808030720462, -0.00439069292007244, 0.0120422280258523, -0.0036473648335803, 0.0068491236187711, 0.0032310450078505398, 0.0007468980715308331, 0.00129405628305146, 0.00575131426471609, -0.002383210823103, -0.0028030023207355997, -0.013701900406251199, -0.0192476579096731, 0.0155139768242882, 0.0322630908380674, -0.00249532900881011, -0.00717023507875603, 0.00441133416275785, -0.00698565473633583, -0.0013321194629522001, -0.00369997071167427, 0.006320741274580491, -0.005270024436523471, -0.005235590151596689, -0.00937045015328331, 0.00595735230655436, 0.00385164668999494, 0.00418732482507767, 0.000978307056874295, 0.005995890049947939, 0.00186604924648437, 0.0057067667045209705, 0.00713449973639757, 0.00061919067083771, -0.000112222227418579, -0.00347498766445764, 0.000430027334829663, -0.00327855660544418],
      activeName: "second",
      activeIndex: "1",
      activeIndex2: "1",
      rangeStart: 20,
      rangeEnd: 80,
    };
  },
  watch: {
    starttime: function (val, oldVal) {
      console.log("start time changed!");
      console.log("starttime=", this.map.get(this.starttime));
      console.log("endtime=", this.map.get(this.endtime));
    },
    endtime: function (val, oldVal) {
      console.log("start time changed!");
      console.log("starttime=", this.map.get(this.starttime));
      console.log("endtime=", this.map.get(this.endtime));
    },
  },
  mounted() {
    let config = {
      url: 'http://localhost:5000/'
    }
    axios.get(config.url + 'assets_extra_by_account/' + this.cookie).then(response => {
      console.log(JSON.stringify(response.data))
      this.xRe = response.data['time_index'];
      this.ProfitRate = response.data['ori_profit_rate']
      this.bmProfitRate = response.data['bm_profit_rate']
      this.alphaProfitRate = response.data['alp_profit_rate']
      this.GEMRate = response.data['gem_ratio']
      this.turnoverRate = response.data['turnover_rate']
      this.initChart();
    })

  },
  beforeDestroy() {
    if (!this.chart) {
      return;
    }
    this.chart.dispose();
    this.chart = null;
  },
  methods: {
    handleSelect(key, keyPath) {
      console.log(key, keyPath);
      if (key[0] == "1") {
        console.log(key);
        this.displayProfitRate();
      }
      else {
          if (key[0] == '2') {
              this.displayTurnoverRate();
          }
          else {
              if (key[0] == '3') {
                  this.displayGEMRate();
              }
          }
      }
    },
    handleTabsClick(tab, event) {
      console.log(tab, event);
    },
    initChart() {
      this.chart3 = echarts.init(document.getElementById(this.id3));
      this.displayProfitRate();    
    },
    displayGEMRate() {
        var vm = this;
      const xData = (function () {
        const data = [];
        for (let i = 0; i < vm.xRe.length; i++) {
          data.push(vm.xRe[i]);
          vm.map.set(vm.xRe[i], i);
        }
        return data;
      })();
      let options = {
        backgroundColor: "#344b58",
        tooltip: {
          trigger: "axis",
          axisPointer: {
            textStyle: {
              color: "#fff",
            },
          },
        },
        grid: {
          left: "5%",
          right: "5%",
          borderWidth: 0,
          top: "10%",
          bottom: 95,
          textStyle: {
            color: "#fff",
          },
        },
        legend: {
          x: "10%",
          top: "2%",
          textStyle: {
            color: "#90979c",
          },
          data: ["创业板比例"],
        },
        calculable: true,
        xAxis: [
          {
            type: "category",
            axisLine: {
              lineStyle: {
                color: "#90979c",
              },
            },
            splitLine: {
              show: false,
            },
            axisTick: {
              show: false,
            },
            splitArea: {
              show: false,
            },
            axisLabel: {
              interval: "auto",
            },
            data: xData,
          },
        ],
        yAxis: [
          {
            scale: true,
            type: "value",
            splitLine: {
              show: false,
            },
            axisLine: {
              lineStyle: {
                color: "#90979c",
              },
            },
            axisTick: {
              show: false,
            },
            axisLabel: {
              interval: 0,
              formatter: function (value, index) {
                return Math.floor(value * 100) + "%";
              },
            },
            splitArea: {
              show: false,
            },
          },
        ],
        dataZoom: [
          {
            show: true,
            height: 30,
            xAxisIndex: [0],
            bottom: 30,
            start: vm.rangeStart,
            end: vm.rangeEnd,
            handleIcon:
              "path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",
            handleSize: "110%",
            handleStyle: {
              color: "#d3dee5",
            },
            textStyle: {
              color: "#fff",
            },
            borderColor: "#90979c",
          },
          {
            type: "inside",
            show: true,
            height: 15,
            start: 1,
            end: 35,
          },
        ],
        series: [
          {
            name: "创业板比例",
            type: "bar",
            stack: "total",
            itemStyle: {
              normal: {
                color: "rgba(155,244,228,1)",
                label: {
                  show: false,
                  textStyle: {
                    color: "#fff",
                  },
                  position: "insideTop",
                  formatter(p) {
                    return p.value > 0 ? p.value : "";
                  },
                },
              },
            },
           data: vm.GEMRate,
          },
        ],
      };
      this.chart3.clear();
      this.chart3.setOption(options);
      this.chart3.on("dataZoom", function (event) {
        var axis = vm.chart3.getModel().option.xAxis[0];
        var starttime = axis.data[axis.rangeStart];
        var endtime = axis.data[axis.rangeEnd];
        console.log(axis.rangeStart);
        vm.rangeStart = axis.rangeStart;
        vm.rangeEnd = axis.rangeEnd;
        vm.starttime = starttime;
        vm.endtime = endtime;
      });
    },
    displayTurnoverRate() {
        var vm = this;
      const xData = (function () {
        const data = [];
        for (let i = 0; i < vm.xRe.length; i++) {
          data.push(vm.xRe[i]);
          vm.map.set(vm.xRe[i], i);
        }
        /*for (let i = 1; i < 13; i++) {
          //data.push(i + 'month')
        }*/
        return data;
      })();
      // below added by xia
      /*const xData = (function() {
        return ['2020-05-07', '20-05-07','2020-05-07', '20-05-07','2020-05-07', '20-05-07','2020-05-07', '20-05-07'];
      })*/
      let options = {
        backgroundColor: "#344b58",
        tooltip: {
          trigger: "axis",
          axisPointer: {
            textStyle: {
              color: "#fff",
            },
          },
        },
        grid: {
          left: "5%",
          right: "5%",
          borderWidth: 0,
          top: "10%",
          bottom: 95,
          textStyle: {
            color: "#fff",
          },
        },
        legend: {
          x: "10%",
          top: "2%",
          textStyle: {
            color: "#90979c",
          },
          data: ["换手率"],
        },
        calculable: true,
        xAxis: [
          {
            type: "category",
            axisLine: {
              lineStyle: {
                color: "#90979c",
              },
            },
            splitLine: {
              show: false,
            },
            axisTick: {
              show: false,
            },
            splitArea: {
              show: false,
            },
            axisLabel: {
              interval: "auto",
            },
            data: xData,
          },
        ],
        yAxis: [
          {
            scale: true,
            type: "value",
            splitLine: {
              show: false,
            },
            axisLine: {
              lineStyle: {
                color: "#90979c",
              },
            },
            axisTick: {
              show: false,
            },
            axisLabel: {
              interval: 0,
              formatter: function (value, index) {
                return Math.floor(value * 100) + "%";
              },
            },
            splitArea: {
              show: false,
            },
          },
        ],
        dataZoom: [
          {
            show: true,
            height: 30,
            xAxisIndex: [0],
            bottom: 30,
            start: vm.rangeStart,
            end: vm.rangeEnd,
            handleIcon:
              "path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",
            handleSize: "110%",
            handleStyle: {
              color: "#d3dee5",
            },
            textStyle: {
              color: "#fff",
            },
            borderColor: "#90979c",
          },
          {
            type: "inside",
            show: true,
            height: 15,
            start: 1,
            end: 35,
          },
        ],
        series: [
          {
            name: "换手率",
            type: "bar",
            stack: "total",
            itemStyle: {
              normal: {
                color: "rgba(255,144,128,1)",
                label: {
                  show: false,
                  textStyle: {
                    color: "#fff",
                  },
                  position: "insideTop",
                  formatter(p) {
                    return p.value > 0 ? p.value : "";
                  },
                },
              },
            },
           data: vm.turnoverRate,
          },
        ],
      };
      this.chart3.clear();
      this.chart3.setOption(options);
      this.chart3.on("dataZoom", function (event) {
        var axis = vm.chart3.getModel().option.xAxis[0];
        var starttime = axis.data[axis.rangeStart];
        var endtime = axis.data[axis.rangeEnd];
        vm.rangeStart = axis.rangeStart;
        vm.rangeEnd = axis.rangeEnd;
        vm.starttime = starttime;
        vm.endtime = endtime;
      });
    },
    displayProfitRate() {
      var vm = this;
      const xData = (function () {
        const data = [];
        for (let i = 0; i < vm.xRe.length; i++) {
          data.push(vm.xRe[i]);
          vm.map.set(vm.xRe[i], i);
        }
        return data;
      })();
      let options = {
        backgroundColor: "#344b58",
        tooltip: {
          trigger: "axis",
          axisPointer: {
            textStyle: {
              color: "#fff",
            },
          },
        },
        grid: {
          left: "5%",
          right: "5%",
          borderWidth: 0,
          top: "10%",
          bottom: 95,
          textStyle: {
            color: "#fff",
          },
        },
        legend: {
          x: "10%",
          top: "2%",
          textStyle: {
            color: "#90979c",
          },
          data: ["收益率", "基准收益率", "超额收益率"],
        },
        calculable: true,
        xAxis: [
          {
            type: "category",
            axisLine: {
              lineStyle: {
                color: "#90979c",
              },
            },
            splitLine: {
              show: false,
            },
            axisTick: {
              show: false,
            },
            splitArea: {
              show: false,
            },
            axisLabel: {
              interval: "auto",
            },
            data: xData,
          },
        ],
        yAxis: [
          {
            scale: true,
            type: "value",
            splitLine: {
              show: false,
            },
            axisLine: {
              lineStyle: {
                color: "#90979c",
              },
            },
            axisTick: {
              show: false,
            },
            axisLabel: {
              interval: 0,
              formatter: function (value, index) {
                return Math.floor(value * 100) + "%";
              },
            },
            splitArea: {
              show: false,
            },
          },
        ],
        dataZoom: [
          {
            show: true,
            height: 30,
            xAxisIndex: [0],
            bottom: 30,
            start: vm.rangeStart,
            end: vm.rangeEnd,
            handleIcon:
              "path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z",
            handleSize: "110%",
            handleStyle: {
              color: "#d3dee5",
            },
            textStyle: {
              color: "#fff",
            },
            borderColor: "#90979c",
          },
          {
            type: "inside",
            show: true,
            height: 15,
            start: 1,
            end: 35,
          },
        ],
        series: [
          {
            name: "收益率",
            type: "bar",
            stack: "total",
            itemStyle: {
              normal: {
                //color: 'rgba(255,144,128,1)',
                color: 'rgba(255,144,128,1)',
                label: {
                  show: false,
                  textStyle: {
                    color: "rgba(255,144,128,1)",
                  },
                  position: "insideTop",
                  formatter(p) {
                    return p.value > 0 ? p.value : "";
                  },
                },
              },
            },
            data: vm.ProfitRate,
          },
          {
            name: "基准收益率",
            type: "bar",
            itemStyle: {
              normal: {
                //color: 'rgba(255,144,128,1)',
                color: 'rgba(0,191,183,1)',
                label: {
                  show: false,
                  textStyle: {
                    color: "rgba(255,144,128,1)",
                  },
                  position: "insideTop",
                  formatter(p) {
                    return p.value > 0 ? p.value : "";
                  },
                },
              },
            },
            data: vm.bmProfitRate,
          },
          {
            name: "超额收益率",
            type: "bar",
            itemStyle: {
              normal: {
                //color: 'rgba(255,144,128,1)',
                color: 'rgba(252,230,48,1)',
                label: {
                  show: false,
                  textStyle: {
                    color: "rgba(255,144,128,1)",
                  },
                  position: "insideTop",
                  formatter(p) {
                    return p.value > 0 ? p.value : "";
                  },
                },
              },
            },
            data: vm.alphaProfitRate,
          },
        ],
      };
      this.chart3.clear();
      this.chart3.setOption(options);
      this.chart3.on("dataZoom", function (event) {
        var axis = vm.chart.getModel().option.xAxis[0];
        var starttime = axis.data[axis.rangeStart];
        var endtime = axis.data[axis.rangeEnd];
        vm.rangeStart = axis.rangeStart;
        vm.rangeEnd = axis.rangeEnd;
        vm.starttime = starttime;
        vm.endtime = endtime;
      });
    },
  },
};
</script>

<style scoped>
.table-style {
  background: #344b58 !important;
  background-color: #344b58;
  color: #344b58;
  position: relative;
  width: 100%;
  height: 100px;
}
</style>
